(function(){var a={getRandom:function(c,b){return Math.floor(Math.random()*(b-c+1))+c}};window.Tools=a})();(function(){var c=[];function b(d){d=d||{};this.x=d.x||0;this.y=d.y||0;this.width=d.width||20;this.height=d.height||20;this.color=d.color||"red"}b.prototype.render=function(d){a();this.x=Tools.getRandom(0,d.offsetWidth/this.width-1)*this.width;this.y=Tools.getRandom(0,d.offsetHeight/this.height-1)*this.height;var e=document.createElement("div");d.appendChild(e);c.push(e);e.style.left=this.x+"px";e.style.top=this.y+"px";e.style.width=this.width+"px";e.style.height=this.height+"px";e.style.backgroundColor=this.color;e.style.position="absolute"};function a(){for(var d=c.length-1;d>=0;d--){c[d].parentNode.removeChild(c[d]);c.splice(0,1)}}window.Food=b})();(function(){var b="absolute";var d=[];function c(e){e=e||{};this.width=e.width||20;this.height=e.height||20;this.direction=e.direction||"right";this.body=[{x:3,y:2,color:"red"},{x:2,y:2,color:"blue"},{x:1,y:2,color:"blue"},]}c.prototype.render=function(h){a();for(var g=0,e=this.body.length;g<e;g++){var f=this.body[g];var j=document.createElement("div");h.appendChild(j);d.push(j);j.style.position=b;j.style.width=this.width+"px";j.style.height=this.height+"px";j.style.left=f.x*this.width+"px";j.style.top=f.y*this.height+"px";j.style.backgroundColor=f.color}};function a(){for(var e=d.length-1;e>=0;e--){d[e].parentNode.removeChild(d[e]);d.splice(e,1)}}c.prototype.move=function(k,j){for(var g=this.body.length-1;g>0;g--){this.body[g].x=this.body[g-1].x;this.body[g].y=this.body[g-1].y}var f=this.body[0];switch(this.direction){case"right":f.x+=1;break;case"left":f.x-=1;break;case"top":f.y-=1;break;case"bottom":f.y+=1;break}var e=f.x*this.width;var l=f.y*this.height;if(e===k.x&&l===k.y){var h=this.body[this.body.length-1];this.body.push({x:h.x,y:h.y,color:h.color});k.render(j)}};window.Snake=c})();function remove(){for(var a=elements.length-1;a>=0;a--){elements[a].parentNode.removeChild(elements[a]);elements.splice(a,1)}}(function(){var c;function d(e){this.food=new Food();this.snake=new Snake();this.map=e;c=this}d.prototype.start=function(){this.food.render(this.map);this.snake.render(this.map);b();a()};function a(){document.addEventListener("keydown",function(f){console.log(f.keyCode);switch(f.keyCode){case 37:this.snake.direction="left";break;case 38:this.snake.direction="top";break;case 39:this.snake.direction="right";break;case 40:this.snake.direction="bottom";break}}.bind(c),false)}function b(){var e=setInterval(function(){this.snake.move(this.food,this.map);this.snake.render(this.map);var h=this.map.offsetWidth/this.snake.width-1;var g=this.map.offsetHeight/this.snake.height-1;var f=this.snake.body[0].x;var i=this.snake.body[0].y;if(f<0||f>=h){clearInterval(e);alert("Game over")}if(i<0||i>=g){clearInterval(e);alert("Game over")}}.bind(c),300)}window.Game=d})();(function(){var b=document.getElementById("map");var a=new Game(b);a.start()})();